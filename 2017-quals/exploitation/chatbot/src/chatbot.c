// gcc -o Hacktoday -fno-stack-protector -z execstack source.c -no-pie
#include <stdio.h>
#include <string.h>

static char buf[1024];
static char response[1024];

void respon(){
    snprintf(response, 0x400, buf);
}

void kirim() {
    setvbuf(stdout, NULL, _IONBF, 0);  
    FILE *fp;
    int randomData, random;
    setvbuf(stdout, NULL, _IONBF, 0);  
    fp = fopen("/dev/urandom", "r");
    fread(&random, sizeof(int), 1, fp);
    random = abs(random);
    randomData = random;
    respon();

    randomData = randomData % 3;
    printf("%s", response);
    
    if(randomData==0){
    	puts("Ya!");
    } else if(randomData == 1){
    	puts("Tidak!");
    } else {
    	puts("Bisa jadi sih?");
    }

    putchar('\n');
    fflush(stdin);
}

int main() {
    setvbuf(stdout, NULL, _IONBF, 0);  
    printf("Selamat datang di program chat bot\n");
    printf("Masukan pertanyaan anda dan bot akan menjawab dengan 'Ya', 'Tidak', atau 'Bisa jadi'\n");
	do {
        fgets(buf, 0x400, stdin);
        kirim();
    } while(buf);
}
